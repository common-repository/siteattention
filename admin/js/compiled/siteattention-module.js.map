{"version":3,"sources":["../siteattention-module.js"],"names":["$","SiteAttentionWordPress","domElements","wpContent","document","getElementById","SiteAttentionInfo","pid","iid","SiteAttentionModule","Cms","WordPress","post_type","language","navigator","user_name","url","published","fields","seo","name","selector","type","push","FieldFactory","body","classList","add","remove","style","marginRight","click","event","el","e","createEvent","initEvent","dispatchEvent","status","key","instance","post","JSON","stringify","iname","ilocked","locked","data","textStatus","xhr","readability","score","html","append","wpcontent","container","createElement","id","setContainerHeight","window","addEventListener","appendChild","wpHtmlContainer","querySelector","wpHtmlContainerStyle","getComputedStyle","wpHtmlContainerStylePaddingTop","paddingTop","topPos","Number","slice","height","innerHeight","SiteAttention","play","getContainer","minimised","load","getPid","getIId","cms","getCMS","getType","lang","getLang","user","getUser","getUrl","getPublished","map","getMap","onShow","permalinkEvent","hooks","s","k","i","saveInformation","saveInstance","d","setScore","onMinimise","onMaximise","init","jQuery"],"mappings":"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","file":"siteattention-module.js","sourcesContent":["( function ( $ )\r\n{\r\n    'use strict';\r\n    class SiteAttentionWordPress\r\n    {\r\n        constructor()\r\n        {\r\n            this.domElements = {\r\n\r\n                wpContent: document.getElementById( 'wpcontent' )\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Gets the post id used as the pid\r\n         * @return int\r\n         */\r\n        getPid()\r\n        {\r\n            return + SiteAttentionInfo.pid;\r\n        }\r\n\r\n        /**\r\n         * Returns the iid if set\r\n         * @return string\r\n         */\r\n        getIId()\r\n        {\r\n            return SiteAttentionInfo.iid;\r\n        }\r\n\r\n        /**\r\n         * Returns the cms code\r\n         * @return {string} wordpress short code\r\n         */\r\n        getCMS()\r\n        {\r\n            return SiteAttentionModule.Cms.WordPress;\r\n        }\r\n\r\n        /**\r\n         * Gets the post type\r\n         * @return string\r\n         */\r\n        getType()\r\n        {\r\n            return SiteAttentionInfo.post_type;\r\n        }\r\n\r\n        /**\r\n         * Gets the language from the WP site config or the users navigator language\r\n         * @return string\r\n         */\r\n        getLang()\r\n        {\r\n            return SiteAttentionInfo.language || navigator.language || null;\r\n        }\r\n\r\n        /**\r\n         * Gets the user name (technically the wordpress user_login which is unchangeable)\r\n         * @return string\r\n         */\r\n        getUser()\r\n        {\r\n            return SiteAttentionInfo.user_name;\r\n        }\r\n\r\n        /**\r\n         * Gets the full link to the post (before saving this isn't available)\r\n         * @return string\r\n         */\r\n        getUrl()\r\n        {\r\n            return SiteAttentionInfo.url;\r\n        }\r\n\r\n        /**\r\n         * Gets the publish status\r\n         * @return boolean\r\n         */\r\n        getPublished()\r\n        {\r\n            return SiteAttentionInfo.published === '1';\r\n        }\r\n\r\n        /**\r\n         * Gets the fields supplied by the custom_js for mapping\r\n         * @return array\r\n         */\r\n        getMap()\r\n        {\r\n            let fields = [];\r\n\r\n            if\r\n            (\r\n                SiteAttentionInfo.post_type === 'post' ||\r\n                SiteAttentionInfo.post_type === 'page'\r\n            )\r\n            {\r\n                fields = [\r\n                    {\r\n                        seo: 'title',\r\n                        name: 'Title',\r\n                        selector: '#title|0',\r\n                        type: 'FieldInput'\r\n                    },\r\n                    {\r\n                        seo: 'url',\r\n                        name: 'Slug',\r\n                        selector: '#post_name|0',\r\n                        type: 'FieldInput',\r\n                    },\r\n                    {\r\n                        seo: 'metadescription',\r\n                        name: 'Excerpt',\r\n                        selector: '#excerpt|0',\r\n                        type: 'FieldInput'\r\n                    },\r\n                    {\r\n                        seo: 'content',\r\n                        name: 'Content',\r\n                        selector: '#content|0',\r\n                        type: 'FieldTinyMCE4'\r\n                    },\r\n                    {\r\n                        seo: 'headers',\r\n                        name: 'Headers',\r\n                        selector: '#content|0',\r\n                        type: 'FieldTinyMCE4'\r\n                    },\r\n                    {\r\n                        seo: 'images',\r\n                        name: 'Images',\r\n                        selector: '#content|0',\r\n                        type: 'FieldTinyMCE4'\r\n                    },\r\n                    {\r\n                        seo: 'videos',\r\n                        name: 'Videos',\r\n                        selector: '#content|0',\r\n                        type: 'FieldTinyMCE4'\r\n                    },\r\n                    {\r\n                        seo: 'links',\r\n                        name: 'Links',\r\n                        selector: '#content|0',\r\n                        type: 'FieldTinyMCE4'\r\n                    },\r\n                ];\r\n            }\r\n\r\n            if\r\n            (\r\n                SiteAttentionInfo.post_type === 'post'\r\n            )\r\n            {\r\n                fields.push(\r\n                {\r\n                    seo: 'metakeywords',\r\n                    name: 'Tags',\r\n                    selector: '#tax-input-post_tag|0',\r\n                    type: 'FieldInput'\r\n                } );\r\n            }\r\n\r\n            return SiteAttentionModule.FieldFactory( fields );\r\n        }\r\n\r\n        /**\r\n         * Add siteattention-on class to the body tag\r\n         * @return\r\n         */\r\n        onShow()\r\n        {\r\n            document.body.classList.add( 'siteattention-on' );\r\n        }\r\n\r\n        /**\r\n         * Removes the siteattention-on class from the body tag\r\n         * @return\r\n         */\r\n        onHide()\r\n        {\r\n            document.body.classList.remove( 'siteattention-on' );\r\n        }\r\n\r\n        /**\r\n         * Hookd to after minimise\r\n         */\r\n        onMinimise()\r\n        {\r\n            this.domElements.wpContent.style.marginRight = `${0}px`;\r\n        }\r\n\r\n        /**\r\n         * Hookd to after maximise\r\n         */\r\n        onMaximise()\r\n        {\r\n            this.domElements.wpContent.style.marginRight = `${350}px`\r\n        }\r\n\r\n        /**\r\n         * Trigger keyup event when user is changing the permalink which is the same as the url slug we need\r\n         * @return {[type]} [description]\r\n         */\r\n        permalinkEvent()\r\n        {\r\n            $( '#edit-slug-box' ).click( function ( event )\r\n            {\r\n                let el = document.getElementById( 'post_name' );\r\n                let e = document.createEvent( 'HTMLEvents' );\r\n\r\n                e.initEvent( 'keyup', false, true );\r\n                el.dispatchEvent( e );\r\n            } );\r\n        }\r\n\r\n        /**\r\n         * Save the SiteAttention iid and license key in Wordpress\r\n         * @param  {boolean}   Request status\r\n         * @param  {string}    The license key\r\n         * @param  {object}    Instance object\r\n         * @return {[type]}    [description]\r\n         */\r\n        saveInformation( status, key, instance )\r\n        {\r\n            if ( !status ) return;\r\n\r\n            $.post('/siteattention/settings',JSON.stringify({\r\n                key: key,\r\n                iid: instance.iid,\r\n                iname: instance.name,\r\n                ilocked: instance.locked,\r\n            }),function(data,textStatus,xhr){});\r\n        }\r\n\r\n        /**\r\n         * Save the instance information after sign up\r\n         * @param  {boolean} status   Request status\r\n         * @param  {object} instance Instance object\r\n         * @return {[type]}          [description]\r\n         */\r\n        saveInstance( status, instance )\r\n        {\r\n            if ( !status ) return;\r\n\r\n            $.post('/siteattention/settings',JSON.stringify({\r\n                iid: instance.iid,\r\n                iname: instance.name,\r\n                ilocked: instance.locked,\r\n            }),function(data,textStatus,xhr){});\r\n        }\r\n\r\n        /**\r\n         * Save the instance information after sign up\r\n         * @param  {boolean} status     Request status\r\n         * @param  {string}  key        License key\r\n         * @return {[type]}          [description]\r\n         */\r\n        saveLicense( status, key )\r\n        {\r\n            if ( !status ) return;\r\n\r\n            $.post('/siteattention/settings',JSON.stringify({\r\n                key: key,\r\n            }),function(data,textStatus,xhr){});\r\n        }\r\n\r\n        /**\r\n         * Adding the SiteAttention score to the sidebar\r\n         */\r\n        setScore( status, data )\r\n        {\r\n            if ( !data ) return;\r\n\r\n            let readability = data.readability; //Math.round(data.readability * 10) / 10;\r\n            let score = data.score;\r\n\r\n            let html = `\r\n                <div id=\"siteattention-sidebarscore\">\r\n                    <div id=\"siteattention-readability\" class=\"misc-pub-section siteattention-score\">\r\n                        <span class=\"siteattention-score--logo\"></span>\r\n                        <span class=\"siteattention-score--title\">Readability: <b>${readability}</b></span>\r\n                    </div>\r\n                    <div id=\"siteattention-score\" class=\"misc-pub-section siteattention-score\">\r\n                        <span class=\"siteattention-score--logo\"></span>\r\n                        <span class=\"siteattention-score--title\">SEO: <b>${score}%</b></span>\r\n                    </div>\r\n                </div>\r\n            `;\r\n\r\n            $( '#siteattention-sidebarscore' ).remove(); // Remove the old\r\n            $( '#misc-publishing-actions' ).append( html );\r\n        }\r\n\r\n        /**\r\n         * Returns the wrapper container for SiteAttention\r\n         * @return {div} The div\r\n         */\r\n        getContainer()\r\n        {\r\n            let wpcontent = document.getElementById( 'wpcontent' ),\r\n                container = document.createElement( 'div' );\r\n\r\n            wpcontent.style.marginRight = '350px';\r\n            container.id = 'SAPL';\r\n\r\n            this.setContainerHeight( container, wpcontent );\r\n\r\n            ! function ( setContainerHeight, container, wpcontent )\r\n            {\r\n                window.addEventListener( 'resize', function ( event )\r\n                {\r\n                    setContainerHeight( container, wpcontent )\r\n                } );\r\n\r\n            }( this.setContainerHeight, container, wpcontent );\r\n\r\n            document.body.appendChild( container );\r\n\r\n            return container;\r\n        }\r\n\r\n        /**\r\n         * Adjusts the height of the container div\r\n         */\r\n        setContainerHeight( container, wpcontent )\r\n        {\r\n            let wpHtmlContainer = document.querySelector( \"html.wp-toolbar\" ),\r\n                wpHtmlContainerStyle = window.getComputedStyle( wpHtmlContainer, null ),\r\n                wpHtmlContainerStylePaddingTop = wpHtmlContainerStyle.paddingTop,\r\n                topPos = Number( wpHtmlContainerStylePaddingTop.slice( 0, 2 ) ),\r\n                height = window.innerHeight - topPos;\r\n\r\n            container.style.height = `${height}px`;\r\n        }\r\n\r\n        /**\r\n         * Initiate SiteAttention script\r\n         */\r\n        init()\r\n        {\r\n            // Show SiteAttention on the page\r\n            SiteAttention.play(\r\n            {\r\n                container: this.getContainer(),\r\n                minimised: false,\r\n            } );\r\n\r\n            // Load SiteAttention with the data\r\n            SiteAttention.load( {\r\n                pid:        this.getPid(),\r\n                iid:        this.getIId(),\r\n                cms:        this.getCMS(),\r\n                type:       this.getType(),\r\n                lang:       this.getLang(),\r\n                user:       this.getUser(),\r\n                url:        this.getUrl(),\r\n                published:  this.getPublished(),\r\n                map:        this.getMap(),\r\n            } );\r\n\r\n            // Various UI conveniences\r\n            this.onShow();\r\n            this.permalinkEvent();\r\n\r\n            // DB saving hooks\r\n            SiteAttentionModule.hooks.add( 'after', 'register', 'Saving client information', ( s, k, i ) => this.saveInformation( s, k, i ) );\r\n            SiteAttentionModule.hooks.add( 'after', 'instance', 'Saving instance data', ( s, i ) => this.saveInstance( s, i ) );\r\n            SiteAttentionModule.hooks.add( 'after', 'license',  'Save existing license', ( s, k, i ) => this.saveInformation( s, k, i ) );\r\n\r\n            // UI hooks\r\n            SiteAttentionModule.hooks.add( 'after', 'update',   'UI update', ( s, d ) => this.setScore( s, d ) );\r\n            SiteAttentionModule.hooks.add( 'after', 'minimise', 'Minimise', ( s ) => this.onMinimise( s ) );\r\n            SiteAttentionModule.hooks.add( 'after', 'maximise', 'Maximise', ( s ) => this.onMaximise( s ) );\r\n        }\r\n    };\r\n\r\n    $( window ).load( function ()\r\n    {\r\n        if ( typeof SiteAttention !== 'undefined' )\r\n        {\r\n            ( new SiteAttentionWordPress() ).init();\r\n        }\r\n    } );\r\n\r\n} )( jQuery );\r\n"]}